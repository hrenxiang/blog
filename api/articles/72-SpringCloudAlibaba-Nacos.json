{"title":"SpringCloudALibaba Nacos","uid":"46276fa8df4cb43fb10a4919c6ba9d21","slug":"72-SpringCloudAlibaba-Nacos","date":"2021-09-13T15:48:32.000Z","updated":"2021-09-15T10:46:15.635Z","comments":true,"path":"api/articles/72-SpringCloudAlibaba-Nacos.json","cover":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-blog4.jpg","content":"<h4 id=\"01、SpringCloud-Alibaba-简介\"><a href=\"#01、SpringCloud-Alibaba-简介\" class=\"headerlink\" title=\"01、SpringCloud Alibaba 简介\"></a>01、SpringCloud Alibaba 简介</h4><hr/>\n\n<h5 id=\"1-1、SpringCloud-Alibaba为何出现\"><a href=\"#1-1、SpringCloud-Alibaba为何出现\" class=\"headerlink\" title=\"1.1、SpringCloud Alibaba为何出现\"></a>1.1、SpringCloud Alibaba为何出现</h5><p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-1.png\" alt=\"image-20210816195832243\"></p>\n<h5 id=\"1-2、SpringCloud-Alibaba是什么\"><a href=\"#1-2、SpringCloud-Alibaba是什么\" class=\"headerlink\" title=\"1.2、SpringCloud Alibaba是什么\"></a>1.2、SpringCloud Alibaba是什么</h5><p>诞生：2018.10.31，Spring Cloud Alibaba正式入驻了Spring Cloud官网孵化器，并在Maven中央库发布了第一个版本。</p>\n<p>Spring Cloud Alibaba 致力于提供微服务开发的一站式解决方案。此项目包含开发分布式应用微服务的必需组件，方便开发者通过 Spring Cloud 编程模型轻松使用这些组件来开发分布式应用服务。</p>\n<p>依托 Spring Cloud Alibaba，您只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。</p>\n<h5 id=\"1-3、SpringCloud-Alibaba能做什么\"><a href=\"#1-3、SpringCloud-Alibaba能做什么\" class=\"headerlink\" title=\"1.3、SpringCloud Alibaba能做什么\"></a>1.3、SpringCloud Alibaba能做什么</h5><ul>\n<li><strong>服务限流降级</strong>：默认支持 WebServlet、WebFlux, OpenFeign、RestTemplate、Spring Cloud Gateway, Zuul, Dubbo 和 RocketMQ 限流降级功能的接入，可以在运行时通过控制台实时修改限流降级规则，还支持查看限流降级 Metrics 监控。</li>\n<li><strong>服务注册与发现</strong>：适配 Spring Cloud 服务注册与发现标准，默认集成了 Ribbon 的支持。</li>\n<li><strong>分布式配置管理</strong>：支持分布式系统中的外部化配置，配置更改时自动刷新。</li>\n<li><strong>消息驱动能力</strong>：基于 Spring Cloud Stream 为微服务应用构建消息驱动能力。</li>\n<li><strong>分布式事务</strong>：使用 @GlobalTransactional 注解， 高效并且对业务零侵入地解决分布式事务问题。</li>\n<li><strong>阿里云对象存储</strong>：阿里云提供的海量、安全、低成本、高可靠的云存储服务。支持在任何应用、任何时间、任何地点存储和访问任意类型的数据。</li>\n<li><strong>分布式任务调度</strong>：提供秒级、精准、高可靠、高可用的定时（基于 Cron 表达式）任务调度服务。同时提供分布式的任务执行模型，如网格任务。网格任务支持海量子任务均匀分配到所有 Worker（schedulerx-client）上执行。</li>\n<li><strong>阿里云短信服务</strong>：覆盖全球的短信服务，友好、高效、智能的互联化通讯能力，帮助企业迅速搭建客户触达通道。</li>\n</ul>\n<h5 id=\"1-4、它的具体组件\"><a href=\"#1-4、它的具体组件\" class=\"headerlink\" title=\"1.4、它的具体组件\"></a>1.4、它的具体组件</h5><p><strong>Sentinel</strong></p>\n<p>阿里巴巴开源产品，把流量作为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。</p>\n<p><strong>Nacos</strong></p>\n<p>阿里巴巴开源产品，一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。</p>\n<p><strong>RocketMQ</strong></p>\n<p>Apache RocketMQ™ 基于java以及高可用分布式集群技术的，提供低延时的、高可靠的消息发布与订阅服务。</p>\n<p><strong>Dubbo</strong></p>\n<p>Apache Dubbo™ 是一款高性能 Java RPC 框架。</p>\n<p><strong>Seata</strong></p>\n<p>阿里巴巴开源产品，一个易于使用的高性能微服务分布式事务解决方案。</p>\n<p><strong>Alibaba Cloud OSS</strong></p>\n<p>阿里云对象存储服务（Object Storage Service，简称 OSS），是阿里云提供的海量、安全、低成本、高可靠的云存储服务。您可以在任何应用、任何时间、任何地点存储和访问任意类型的数据。</p>\n<p><strong>Alibaba Cloud SchedulerX</strong></p>\n<p>阿里中间件团队开发的一款分布式任务调度产品，支持周期性的任务与固定时间点触发任务。</p>\n<p><strong>Alibaba Cloud SMS</strong></p>\n<p>覆盖全球的短信服务，友好、高效、智能的互联化通讯能力，帮助企业迅速搭建客户触达通道。</p>\n<h5 id=\"1-5、它的-Maven-依赖\"><a href=\"#1-5、它的-Maven-依赖\" class=\"headerlink\" title=\"1.5、它的 Maven 依赖\"></a>1.5、它的 Maven 依赖</h5><pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;\n            &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;&#x2F;artifactId&gt;\n            &lt;version&gt;2.2.0.RELEASE&lt;&#x2F;version&gt;\n            &lt;type&gt;pom&lt;&#x2F;type&gt;\n            &lt;scope&gt;import&lt;&#x2F;scope&gt;\n        &lt;&#x2F;dependency&gt;\n    &lt;&#x2F;dependencies&gt;\n&lt;&#x2F;dependencyManagement&gt;</code></pre>\n\n\n\n<h5 id=\"1-6、SpringCloud-Alibaba学习文档\"><a href=\"#1-6、SpringCloud-Alibaba学习文档\" class=\"headerlink\" title=\"1.6、SpringCloud Alibaba学习文档\"></a>1.6、SpringCloud Alibaba学习文档</h5><p>英文</p>\n<p><a href=\"https://github.com/alibaba/spring-cloud-alibaba\">https://github.com/alibaba/spring-cloud-alibaba</a></p>\n<p><a href=\"https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html\">https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html</a></p>\n<p>中文</p>\n<p><a href=\"https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md\">https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md</a></p>\n<h4 id=\"02、服务注册和配置中心-Nacos\"><a href=\"#02、服务注册和配置中心-Nacos\" class=\"headerlink\" title=\"02、服务注册和配置中心  Nacos\"></a>02、服务注册和配置中心  Nacos</h4><hr/>\n\n<h5 id=\"1-1、Nacos-能做什么\"><a href=\"#1-1、Nacos-能做什么\" class=\"headerlink\" title=\"1.1、Nacos 能做什么\"></a>1.1、Nacos 能做什么</h5><p>Nacos（官网：<a href=\"https://nacos.io/\">nacos.io</a>）是一个易于使用的平台，<strong>专为动态服务发现和配置以及服务管理而设计</strong>。它可以帮助您轻松构建云原生应用程序和微服务平台。</p>\n<p>服务是Nacos的一等公民。Nacos 支持几乎所有类型的服务，例如 <a href=\"https://nacos.io/en-us/docs/use-nacos-with-dubbo.html\">Dubbo/gRPC 服务</a>、<a href=\"https://nacos.io/en-us/docs/use-nacos-with-springcloud.html\">Spring Cloud RESTFul 服务</a>或<a href=\"https://nacos.io/en-us/docs/use-nacos-with-kubernetes.html\">Kubernetes 服务</a>。</p>\n<p>一个更易于构建云原生应用的动态服务发现，配置管理和服务管理中心</p>\n<ul>\n<li>Nacos：Dynamic Naming and Configuration Service</li>\n<li>Nacos就是==注册中心+配置中心==的组合</li>\n<li>等价于：Nacos = Eureka+Config+Bus</li>\n</ul>\n<h5 id=\"1-2、Nacos-主要功能\"><a href=\"#1-2、Nacos-主要功能\" class=\"headerlink\" title=\"1.2、Nacos 主要功能\"></a>1.2、Nacos 主要功能</h5><p>1、服务发现和服务健康检查</p>\n<p>Nacos 使服务通过 DNS 或 HTTP 接口注册自己和发现其他服务变得简单。Nacos 还提供服务的实时健康检查，以防止向不健康的主机或服务实例发送请求。</p>\n<p>2、动态配置管理</p>\n<p>动态配置服务允许您在所有环境中以集中和动态的方式管理所有服务的配置。Nacos 无需在更新配置时重新部署应用程序和服务，这使得配置更改更加高效和敏捷。</p>\n<p>3、动态 DNS 服务</p>\n<p>Nacos 支持加权路由，让您更容易在数据中心内的生产环境中实现中层负载均衡、灵活的路由策略、流量控制和简单的 DNS 解析服务。它可以帮助您轻松实现基于 DNS 的服务发现，并防止应用程序耦合到特定于供应商的服务发现 API。</p>\n<p>4、服务和元数据管理</p>\n<p>Nacos 提供了一个易于使用的服务仪表板，帮助您管理您的服务元数据、配置、kubernetes DNS、服务健康和指标统计。</p>\n<h5 id=\"1-3、Nacos-在哪里\"><a href=\"#1-3、Nacos-在哪里\" class=\"headerlink\" title=\"1.3、Nacos 在哪里\"></a>1.3、Nacos 在哪里</h5><p>GitHub：<a href=\"https://github.com/alibaba/Nacos\">https://github.com/alibaba/Nacos</a></p>\n<p>官方文档：<a href=\"https://nacos.io/zh-cn/index.html\">https://nacos.io/zh-cn/index.html</a></p>\n<p><a href=\"https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html\">https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html</a></p>\n<h5 id=\"1-4、各种注册中心比较\"><a href=\"#1-4、各种注册中心比较\" class=\"headerlink\" title=\"1.4、各种注册中心比较\"></a>1.4、各种注册中心比较</h5><div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-2.png\" alt=\"image-20210816201804106\" style=\"zoom:80%;\" />\n</div>\n\n<p>据说nacos在阿里巴巴内部有超过10万的实例运行，已经过了类似双十一等各种大型流量的考验</p>\n<p>CAP原则又称CAP定理，指的是在一个分布式系统中，一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）。CAP 原则指的是，这三个要素最多只能同时实现两点，不可能三者兼顾。</p>\n<p>1、一致性（C）</p>\n<p>在分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）</p>\n<p>2、可用性（A）</p>\n<p>在集群中一部分节点故障后，集群整体是否还能响应客户端的读写请求。（对数据更新具备高可用性）</p>\n<p>3、分区容忍性（P）</p>\n<p>以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。</p>\n<p>==注意：CAP原则的精髓就是要么AP，要么CP，要么AC，但是不存在CAP。==</p>\n<p>如果在某个分布式系统中数据无副本， 那么系统必然满足强一致性条件， 因为只有独一数据，不会出现数据不一致的情况，此时C和P两要素具备，但是如果系统发生了网络分区状况或者宕机，必然导致某些数据不可以访问，此时可用性条件就不能被满足，即在此情况下获得了CP系统，但是CAP不可同时满足。</p>\n<p>因此在进行分布式架构设计时，必须做出取舍。当前一般是通过分布式缓存中各节点的最终一致性来提高系统的性能，通过使用多节点之间的数据异步复制技术来实现集群化的数据一致性。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Nacos支持AP和CP模式的切换</p>\n<p>curl -X PUT ‘$NACOS_SERVER:8848/nacos/v1/ns/operator/switches?entry=serverMode&amp;value=CP’</p></blockquote>\n<h5 id=\"1-5、安装并运行-Nacos\"><a href=\"#1-5、安装并运行-Nacos\" class=\"headerlink\" title=\"1.5、安装并运行 Nacos\"></a>1.5、安装并运行 Nacos</h5><ul>\n<li>本地Java8+Maven环境已经OK</li>\n<li>先从官网下载Nacos：<a href=\"https://github.com/alibaba/nacos/releases/tag/1.1.4\">https://github.com/alibaba/nacos/releases/tag/1.1.4</a></li>\n<li>解压安装包，直接运行bin/startup.cmd</li>\n<li>命令运行成功后直接访问：<a href=\"http://localhost:8848/nacos\">http://localhost:8848/nacos</a>         默认账号密码都是nacos</li>\n</ul>\n<p>界面如下：</p>\n<div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-3.png\" alt=\"image-20210816202100996\" style=\"zoom:80%;\" />\n</div>\n\n\n\n<h4 id=\"03、Nacos-作为服务注册中心\"><a href=\"#03、Nacos-作为服务注册中心\" class=\"headerlink\" title=\"03、Nacos 作为服务注册中心\"></a>03、Nacos 作为服务注册中心</h4><hr/>\n\n<h5 id=\"1-1、基于Nacos的服务提供者\"><a href=\"#1-1、基于Nacos的服务提供者\" class=\"headerlink\" title=\"1.1、基于Nacos的服务提供者\"></a>1.1、基于Nacos的服务提供者</h5><p>新建模块：cloudalibaba-provider-payment9001</p>\n<p>父POM</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;!--spring cloud alibaba 2.1.0.RELEASE--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;\n    &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;&#x2F;artifactId&gt;\n    &lt;version&gt;2.1.0.RELEASE&lt;&#x2F;version&gt;\n    &lt;type&gt;pom&lt;&#x2F;type&gt;\n    &lt;scope&gt;import&lt;&#x2F;scope&gt;\n&lt;&#x2F;dependency&gt;</code></pre>\n\n<p>本模块POM</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;&#x2F;artifactId&gt;\n        &lt;scope&gt;runtime&lt;&#x2F;scope&gt;\n        &lt;optional&gt;true&lt;&#x2F;optional&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;\n        &lt;optional&gt;true&lt;&#x2F;optional&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;\n        &lt;scope&gt;test&lt;&#x2F;scope&gt;\n    &lt;&#x2F;dependency&gt;\n&lt;&#x2F;dependencies&gt;</code></pre>\n\n<p>YML</p>\n<pre class=\"line-numbers language-yml\" data-language=\"yml\"><code class=\"language-yml\">server:\n  port: 9001\n\nspring:\n  application:\n    name: nacos-payment-provider\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848 #配置Nacos地址\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: &#39;*&#39;  #默认只公开了&#x2F;health和&#x2F;info端点，要想暴露所有端点只需设置成星号</code></pre>\n\n<p>主启动类</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">package com.atguigu.springcloud.alibaba;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@EnableDiscoveryClient\n@SpringBootApplication\npublic class PaymentMain9001 &#123;\n    public static void main(String[] args) &#123;\n        SpringApplication.run(PaymentMain9001.class,args);\n    &#125;\n&#125;</code></pre>\n\n<p>业务类</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">package com.atguigu.springcloud.alibaba.controller;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class PaymentController&#123;\n    @Value(&quot;$&#123;server.port&#125;&quot;)\n    private String serverPort;\n \n    @GetMapping(value &#x3D; &quot;&#x2F;payment&#x2F;nacos&#x2F;&#123;id&#125;&quot;)\n    public String getPayment(@PathVariable(&quot;id&quot;) Long id) &#123;\n        return &quot;nacos registry, serverPort: &quot;+ serverPort+&quot;\\t id&quot;+id;\n    &#125;\n&#125;</code></pre>\n\n<p>测试：<a href=\"http://localhost:9001/payment/nacos/1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%A6%82%E4%B8%8B%EF%BC%9A\">http://localhost:9001/payment/nacos/1，控制台如下：</a></p>\n<div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-4.png\" alt=\"image-20210816202825692\" style=\"zoom:80%;\" />\n</div>\n\n\n\n<h5 id=\"1-2、演示nacos的负载均衡的准备\"><a href=\"#1-2、演示nacos的负载均衡的准备\" class=\"headerlink\" title=\"1.2、演示nacos的负载均衡的准备\"></a>1.2、演示nacos的负载均衡的准备</h5><p>参照9001新建9002，新建cloudalibaba-provider-payment9002，9002其他步骤你懂的，或者取巧不想新建重复体力劳动，==直接拷贝虚拟端口映射==</p>\n<div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-5.png\" alt=\"image-20210816203208626\" style=\"zoom:80%;\" />\n</div>\n\n\n\n<h5 id=\"1-3、提供Nacos的服务消费者\"><a href=\"#1-3、提供Nacos的服务消费者\" class=\"headerlink\" title=\"1.3、提供Nacos的服务消费者\"></a>1.3、提供Nacos的服务消费者</h5><p>新建module：cloudalibaba-consumer-nacos-order83</p>\n<p>POM</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dependencies&gt;\n    &lt;!--SpringCloud ailibaba nacos --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.atguigu.springcloud&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;cloud-api-commons&lt;&#x2F;artifactId&gt;\n        &lt;version&gt;$&#123;project.version&#125;&lt;&#x2F;version&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;&#x2F;artifactId&gt;\n        &lt;scope&gt;runtime&lt;&#x2F;scope&gt;\n        &lt;optional&gt;true&lt;&#x2F;optional&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;\n        &lt;optional&gt;true&lt;&#x2F;optional&gt;\n    &lt;&#x2F;dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;\n        &lt;scope&gt;test&lt;&#x2F;scope&gt;\n    &lt;&#x2F;dependency&gt;\n&lt;&#x2F;dependencies&gt;</code></pre>\n\n<p>YML</p>\n<pre class=\"line-numbers language-yml\" data-language=\"yml\"><code class=\"language-yml\">server:\n  port: 83\n\nspring:\n  application:\n    name: nacos-order-consumer\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n#消费者将要去访问的微服务名称(注册成功进nacos的微服务提供者【可选】，注意：nacos-payment-provider含有IP和端口)\nservice-url:\n  nacos-user-service: http:&#x2F;&#x2F;nacos-payment-provider</code></pre>\n\n<p>主启动类</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">package com.atguigu.springcloud.alibaba;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@EnableDiscoveryClient\n@SpringBootApplication\npublic class OrderNacosMain83&#123;\n    public static void main(String[] args)&#123;\n        SpringApplication.run(OrderNacosMain83.class,args);\n    &#125;\n&#125;</code></pre>\n\n<p>定义负载均衡策略类，使用rest风格定义加载RestTemplate对象的配置类，及业务类</p>\n<img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-6.png\" alt=\"image-20210816204044397\" style=\"zoom:80%;\" />\n\n<p>测试：<a href=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-6.png\">https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-6.png</a></p>\n<h5 id=\"1-4、注意\"><a href=\"#1-4、注意\" class=\"headerlink\" title=\"1.4、注意\"></a>1.4、注意</h5><p>这里虽然自定义了负载均衡的策略，但是我们发现我们并没有再任何地方引用，所以本案例中的负载均衡策略与我们定义的策略无关，是本身自带的策略</p>\n<h4 id=\"04、Nacos-作为配置中心-基础配置\"><a href=\"#04、Nacos-作为配置中心-基础配置\" class=\"headerlink\" title=\"04、Nacos 作为配置中心 - 基础配置\"></a>04、Nacos 作为配置中心 - 基础配置</h4><hr/>\n\n\n\n<p><strong>设置DataId</strong></p>\n<p>公式: ${spring.application.name}-${spring.profile.active}.${spring.cloud.nacos.config.file-extension}</p>\n<p><strong>小总结说明</strong></p>\n<div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-10.png\" alt=\"image-20210816205925768\" style=\"zoom:100%;\" />\n</div>\n\n<p><strong>历史配置：</strong>Nacos会记录配置文件的历史版本默认保留30天</p>\n<h4 id=\"05、Nacos-作为配置中心-分类配置\"><a href=\"#05、Nacos-作为配置中心-分类配置\" class=\"headerlink\" title=\"05、Nacos 作为配置中心 - 分类配置\"></a>05、Nacos 作为配置中心 - 分类配置</h4><hr/>\n\n<h5 id=\"1-1、多环境多项目管理如何管理\"><a href=\"#1-1、多环境多项目管理如何管理\" class=\"headerlink\" title=\"1.1、多环境多项目管理如何管理\"></a>1.1、多环境多项目管理如何管理</h5><p><strong>问题1</strong></p>\n<p>·    实际开发中，通常一个系统会准备</p>\n<p>·    dev开发环境</p>\n<p>·    test测试环境</p>\n<p>·    prod生产环境</p>\n<p>·    如何保证指定环境启动时服务能正确读取到 Nacos上相应环境的配置文件呢?</p>\n<p><strong>问题2</strong></p>\n<p>·    一个大型分布式微服务心痛会有很多微服务子项目</p>\n<p>·    每一个微服务项目又会相应的开发环境、测试环境、预发环境、正式环境….</p>\n<p>·    那怎么对这些微服务配置进行管理呢？</p>\n<h5 id=\"1-2、Nacos的图形化管理界面\"><a href=\"#1-2、Nacos的图形化管理界面\" class=\"headerlink\" title=\"1.2、Nacos的图形化管理界面\"></a>1.2、Nacos的图形化管理界面</h5><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-7.png\" alt=\"image-20210816205101717\" style=\"zoom:80%;\" />\n\n<h5 id=\"1-3、Namespace-Group-Data-ID\"><a href=\"#1-3、Namespace-Group-Data-ID\" class=\"headerlink\" title=\"1.3、Namespace+Group+Data ID\"></a>1.3、Namespace+Group+Data ID</h5><p>最外层的namespace是可以用于区分部署环境的，Group和DataID逻辑上区分两个目标对象。</p>\n<img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-8.image\" alt=\"在这里插入图片描述\" style=\"zoom:80%;\" />\n\n<p>默认情况：Namespace=public，Group=DEFAULT_GROUP，默认Cluster是DEFAULT</p>\n<ul>\n<li><p>Nacos默认的命名空间是public，Namespace主要用来实现隔离。</p>\n<p>比方说我们现在有三个环境：<strong>开发、测试、生产环境</strong>，我们就可以创建三个Namespace，不同的 Namespace之间是隔离的。</p>\n</li>\n<li><p>Group默认是<strong>DEFAULT_GROUP</strong>，Group可以把不同的微服务划分到同一个分组里面去。</p>\n</li>\n<li><p>Service就是微服务；一个Service可以包含多个Cluster(集群)，Nacos默认Cluster是<strong>DEFAULT</strong>Cluster是对指定微服务的一个虚拟划分。</p>\n<p>比方说为了容灾，将Service微服务分别部署在了<strong>杭州机房</strong>和<strong>广州机房</strong>，这时就可以给杭州机房的Service微服务起一个集群名称(<strong>HZ</strong>)，给广州机房的Service微服务起一个集群名字(<strong>GZ</strong>)，还可以尽量让同一个机房的微服务互相调用，以提升性能。</p>\n</li>\n<li><p>最后是Instance，就是微服务的实例</p>\n</li>\n</ul>\n<h5 id=\"1-4、Data-ID-方案\"><a href=\"#1-4、Data-ID-方案\" class=\"headerlink\" title=\"1.4、Data ID 方案\"></a>1.4、Data ID 方案</h5><p>==指定 spring.profile.active 和 配置文件的DataID 来使不同环境下读取不同的配置==</p>\n<p>默认空间 + 默认分组+ 新建dev 和 test 两个DataID</p>\n<p>新建dev配置DataID，新建test配置DataID</p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-9.png\" alt=\"image-20210816205824153\"></p>\n<p>通过spring.profile.active属性就能进行多环境下配置文件的读取，测试：<a href=\"http://localhost:3377/config/info\">http://localhost:3377/config/info</a></p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">spring:\n  profiles:\n    active: test #表示开发环境或者dev</code></pre>\n\n\n\n<h5 id=\"1-5、Group-方案\"><a href=\"#1-5、Group-方案\" class=\"headerlink\" title=\"1.5、Group 方案\"></a>1.5、Group 方案</h5><p>通过Group实现环境区分</p>\n<p>Data ID相同，分区不同，那我们可以按照不同的分区名称读取不同分区相同ID的服务</p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-11.png\" alt=\"image-20210816210443825\"></p>\n<p>bootstrap+application：在bootstrap中的config下加上 Group来指定 调用那个分区的服务（图片中的分区是我的另外一个分区）</p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-12.png\" alt=\"image-20210816210818090\"></p>\n<h5 id=\"1-6、Namespace-方案\"><a href=\"#1-6、Namespace-方案\" class=\"headerlink\" title=\"1.6、Namespace 方案\"></a>1.6、Namespace 方案</h5><p>YML，bootstrap</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\"># nacos配置\nserver:\n  port: 3377\n\nspring:\n  application:\n    name: nacos-config-client\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848 #Nacos服务注册中心地址\n      config:\n        server-addr: localhost:8848 #Nacos作为配置中心地址\n        file-extension: yaml #指定yaml格式的配置\n        group: DEV_GROUP\n        namespace: 7d8f0f5a-6a53-4785-9686-dd460158e5d4</code></pre>\n\n<p>application </p>\n<pre class=\"line-numbers language-yml\" data-language=\"yml\"><code class=\"language-yml\">spring:\n  profiles:\n    active: dev # 表示开发环境\n    #active: test # 表示测试环境\n    #active: info</code></pre>\n\n\n\n<h4 id=\"06、Nacos集群和持久化配置（重要）\"><a href=\"#06、Nacos集群和持久化配置（重要）\" class=\"headerlink\" title=\"06、Nacos集群和持久化配置（重要）\"></a>06、Nacos集群和持久化配置（重要）</h4><hr/>\n\n<h5 id=\"1-1、集群部署架构图\"><a href=\"#1-1、集群部署架构图\" class=\"headerlink\" title=\"1.1、集群部署架构图\"></a>1.1、集群部署架构图</h5><p>因此开源的时候推荐用户把所有服务列表放到一个vip下面，然后挂到一个域名下面</p>\n<p><a href=\"http://ip1/\">http://ip1</a>:port/openAPI 直连ip模式，机器挂则需要修改ip才可以使用。</p>\n<p><a href=\"http://slb/\">http://SLB</a>:port/openAPI 挂载SLB模式(内网SLB，不可暴露到公网，以免带来安全风险)，直连SLB即可，下面挂server真实ip，可读性不好。</p>\n<p><a href=\"http://nacos.com/\">http://nacos.com</a>:port/openAPI 域名 + SLB模式(内网SLB，不可暴露到公网，以免带来安全风险)，可读性好，而且换ip方便，推荐模式</p>\n<div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-13.jpg\" alt=\"deployDnsVipMode.jpg\" style=\"zoom:80%;\" />\n</div>\n\n\n\n<h5 id=\"1-2、真实情况\"><a href=\"#1-2、真实情况\" class=\"headerlink\" title=\"1.2、真实情况\"></a>1.2、真实情况</h5><div>\n    <img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-13.png\" alt=\"image-20210816220500945\" style=\"zoom:80%;\" />\n</div>\n\n\n\n<h5 id=\"1-3、Nacos-支持三种部署模式\"><a href=\"#1-3、Nacos-支持三种部署模式\" class=\"headerlink\" title=\"1.3、Nacos 支持三种部署模式\"></a>1.3、Nacos 支持三种部署模式</h5><ul>\n<li>单机模式 - 用于测试和单机试用。</li>\n<li>集群模式 - 用于生产环境，确保高可用。</li>\n<li>多集群模式 - 用于多数据中心场景。</li>\n</ul>\n<p>默认Nacos使用嵌入式数据库实现数据的存储。所以，如果启动多个默认配置下的Nacos节点，数据存储是存在一致性问题多的。</p>\n<p>==为了解决这个问题，<strong>Nacos</strong>采用了集中式存储的方式来支持集群化部署，目前只支持MySQL <strong>的存储。</strong>==</p>\n<p>文档：<a href=\"https://nacos.io/zh-cn/docs/deployment.html\">https://nacos.io/zh-cn/docs/deployment.html</a></p>\n<h5 id=\"1-4、单机模式支持mysql\"><a href=\"#1-4、单机模式支持mysql\" class=\"headerlink\" title=\"1.4、单机模式支持mysql\"></a>1.4、单机模式支持mysql</h5><p>在0.7版本之前，在单机模式时nacos使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。0.7版本增加了支持mysql数据源能力，具体的操作步骤：</p>\n<ul>\n<li>1.安装数据库，版本要求：5.6.5+</li>\n<li>2.初始化mysql数据库，数据库初始化文件：nacos-mysql.sql</li>\n<li>3.修改conf/application.properties文件，增加支持mysql数据源配置（目前只支持mysql），添加mysql数据源的url、用户名和密码。</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">spring.datasource.platform&#x3D;mysql\n\ndb.num&#x3D;1\ndb.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;11.162.196.16:3306&#x2F;nacos_devtest?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true\ndb.user&#x3D;nacos_devtest\ndb.password&#x3D;youdontknow</code></pre>\n\n<p>再以单机模式启动nacos，nacos所有写嵌入式数据库的数据都写到了mysql</p>\n<h5 id=\"1-5、Nacos持久化配置解释\"><a href=\"#1-5、Nacos持久化配置解释\" class=\"headerlink\" title=\"1.5、Nacos持久化配置解释\"></a>1.5、Nacos持久化配置解释</h5><p>1、Nacos默认自带的是嵌入式数据库derby</p>\n<p><a href=\"https://github.com/alibaba/nacos/blob/develop/config/pom.xml\">https://github.com/alibaba/nacos/blob/develop/config/pom.xml</a></p>\n<p>2、derby到mysql切换配置步骤</p>\n<p>nacos-server-1.1.4\\nacos\\conf目录下找到sql脚本</p>\n<p>nacos-mysql.sql</p>\n<p>执行脚本</p>\n<p>nacos-server-1.1.4\\nacos\\conf目录下找到application.properties</p>\n<pre class=\"line-numbers language-properties\" data-language=\"properties\"><code class=\"language-properties\">spring.datasource.platform&#x3D;mysql     \ndb.num&#x3D;1  \ndb.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;11.162.196.16:3306&#x2F;nacos_devtest?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true  \ndb.user&#x3D;nacos_devtest  \ndb.password&#x3D;youdontknow  </code></pre>\n\n<p>3、启动nacos，可以看到是个全新的空记录界面，以前是记录进derby</p>\n<p>4、测试：新建配置，发现配置信息写入了MySQL数据库</p>\n<h5 id=\"1-6、Linux版Nacos-MySQL配置\"><a href=\"#1-6、Linux版Nacos-MySQL配置\" class=\"headerlink\" title=\"1.6、Linux版Nacos+MySQL配置\"></a>1.6、Linux版Nacos+MySQL配置</h5><ol>\n<li><p>预计需要，1个nginx+3个nacos注册中心+1个mysql</p>\n</li>\n<li><p>Nacos下载linux版本</p>\n</li>\n<li><p><a href=\"https://github.com/alibaba/nacos/releases/tag/1.1.4\">https://github.com/alibaba/nacos/releases/tag/1.1.4</a></p>\n<p>nacos-server-1.1.4.tar.gz</p>\n</li>\n</ol>\n<h5 id=\"1-7、集群配置步骤（重点）\"><a href=\"#1-7、集群配置步骤（重点）\" class=\"headerlink\" title=\"1.7、集群配置步骤（重点）\"></a>1.7、集群配置步骤（重点）</h5><h6 id=\"①-安装-nacos\"><a href=\"#①-安装-nacos\" class=\"headerlink\" title=\"① 安装 nacos\"></a>① 安装 nacos</h6><p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-14.png\" alt=\"image-20210816224153081\"></p>\n<h6 id=\"②-vim-application-properties\"><a href=\"#②-vim-application-properties\" class=\"headerlink\" title=\"② vim application.properties\"></a>② vim application.properties</h6><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">spring.datasource.platform&#x3D;mysql\n\ndb.num&#x3D;1\ndb.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;192.168.137.128:3306&#x2F;nacos_config?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true\ndb.user&#x3D;root\ndb.password&#x3D;Root123.</code></pre>\n\n<h6 id=\"③-复制3台nacos\"><a href=\"#③-复制3台nacos\" class=\"headerlink\" title=\"③ 复制3台nacos\"></a>③ 复制3台nacos</h6><p>梳理出3台nacos机器的不同服务端口号</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>复制出cluster.conf</p></blockquote>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cp cluster.conf.example cluster.conf</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>vim cluster.conf</p></blockquote>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">192.168.96.66:3333\n192.168.96.66:4444\n192.168.96.66:5555</code></pre>\n\n<p>这个IP不能写127.0.0.1,必须是Linux命令hostname -i能够识别的IP</p>\n<h6 id=\"④-编辑启动端\"><a href=\"#④-编辑启动端\" class=\"headerlink\" title=\"④ 编辑启动端\"></a>④ 编辑启动端</h6><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>编辑Nacos的启动脚本startup.sh，使它能够接受不同的启动端</p>\n<p>/nacos/bin目录下有startup.sh</p>\n<p>在什么地方，修改什么，怎么修改</p>\n<p>思考</p>\n<p>/nacos/bin目录下有startup.sh</p>\n<p>平时单机版的启动，都是./startup.sh即可。</p>\n<p>但是</p>\n<p>集群启动，我们希望可以类似其它软件的shell命令，传递不同的端口号启动不同的nacos实例。</p>\n<p>命令：./startup.sh <strong>-p</strong> 3333表示启动端口号为3333的nacos服务器实例，和上一步的cluster.conf配置的一致。</p></blockquote>\n<p>修改内容</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">vim startup.sh</code></pre>\n\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-15.png\" alt=\"image-20210817002404062\"></p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-.png\" alt=\"image-20210817002437636\"></p>\n<h6 id=\"⑤-启动-nacos\"><a href=\"#⑤-启动-nacos\" class=\"headerlink\" title=\"⑤ 启动 nacos\"></a>⑤ 启动 nacos</h6><p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-17.png\" alt=\"image-20210817002625045\"></p>\n<h6 id=\"⑥-修改nginx-conf\"><a href=\"#⑥-修改nginx-conf\" class=\"headerlink\" title=\"⑥ 修改nginx.conf\"></a>⑥ 修改nginx.conf</h6><p>修改nginx的配置文件：vim /usr/local/nginx/conf/nginx.conf</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">nginx.conf\nupstream cluster&#123; \n    server 192.168.137.128:3333;\n    server 192.168.137.128:4444;\n    server 192.168.137.128:5555;\n&#125;\n\nserver&#123;               \n    listen 1111;\n    server_name 192.168.137.128;\n    location &#x2F; &#123;\n         proxy_pass http:&#x2F;&#x2F;cluster;                        \n    &#125;\n....省略  </code></pre>\n\n<h6 id=\"⑦-启动-nginx\"><a href=\"#⑦-启动-nginx\" class=\"headerlink\" title=\"⑦ 启动 nginx\"></a>⑦ 启动 nginx</h6><p>vim /usr/local/nginx/sbin</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">.&#x2F;nginx    .&#x2F;nginx -s start      .&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf\n\n.&#x2F;nginx -s stop</code></pre>\n\n<h6 id=\"⑧-测试通过nginx访问nacos\"><a href=\"#⑧-测试通过nginx访问nacos\" class=\"headerlink\" title=\"⑧ 测试通过nginx访问nacos\"></a>⑧ 测试通过nginx访问nacos</h6><p><a href=\"https://写你自己虚拟机的ip:1111/nacos/#/login\">https:// 192.168.137.128:1111/nacos/#/login</a></p>\n<h6 id=\"⑨-新建一个配置测试\"><a href=\"#⑨-新建一个配置测试\" class=\"headerlink\" title=\"⑨ 新建一个配置测试\"></a>⑨ 新建一个配置测试</h6><p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-18.png\" alt=\"image-20210817003153224\"></p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-19.png\" alt=\"image-20210817003344250\"></p>\n<h6 id=\"⑩-微服务启动注册进nacos集群\"><a href=\"#⑩-微服务启动注册进nacos集群\" class=\"headerlink\" title=\"⑩ 微服务启动注册进nacos集群\"></a>⑩ 微服务启动注册进nacos集群</h6><p>修改 cloudalibaba-provider-payment9002</p>\n<p>yml </p>\n<p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-21.png\" alt=\"image-20210817003513768\"></p>\n<h5 id=\"1-8、高可用小总结\"><a href=\"#1-8、高可用小总结\" class=\"headerlink\" title=\"1.8、高可用小总结\"></a>1.8、高可用小总结</h5><p><img src=\"https://gitee.com/hrenxiang/picture/raw/master/img/alibaba-20.png\" alt=\"image-20210817003628113\"></p>\n","text":"01、SpringCloud Alibaba 简介 1.1、SpringCloud Alibaba为何出现 1.2、SpringCloud Alibaba是什么诞生：2018.10.31，Spring Cloud Alibaba正式入驻了Spring Cloud官网孵化器，并在M...","link":"","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"14 mins."},"categories":[{"name":"SpringCloud Alibaba","slug":"SpringCloud-Alibaba","count":2,"path":"api/categories/SpringCloud-Alibaba.json"}],"tags":[{"name":"SpringCloud Alibaba","slug":"SpringCloud-Alibaba","count":2,"path":"api/tags/SpringCloud-Alibaba.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#01%E3%80%81SpringCloud-Alibaba-%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">01、SpringCloud Alibaba 简介</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1%E3%80%81SpringCloud-Alibaba%E4%B8%BA%E4%BD%95%E5%87%BA%E7%8E%B0\"><span class=\"toc-text\">1.1、SpringCloud Alibaba为何出现</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2%E3%80%81SpringCloud-Alibaba%E6%98%AF%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">1.2、SpringCloud Alibaba是什么</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3%E3%80%81SpringCloud-Alibaba%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">1.3、SpringCloud Alibaba能做什么</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4%E3%80%81%E5%AE%83%E7%9A%84%E5%85%B7%E4%BD%93%E7%BB%84%E4%BB%B6\"><span class=\"toc-text\">1.4、它的具体组件</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-5%E3%80%81%E5%AE%83%E7%9A%84-Maven-%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">1.5、它的 Maven 依赖</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-6%E3%80%81SpringCloud-Alibaba%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">1.6、SpringCloud Alibaba学习文档</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#02%E3%80%81%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%92%8C%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83-Nacos\"><span class=\"toc-text\">02、服务注册和配置中心  Nacos</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1%E3%80%81Nacos-%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">1.1、Nacos 能做什么</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2%E3%80%81Nacos-%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">1.2、Nacos 主要功能</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3%E3%80%81Nacos-%E5%9C%A8%E5%93%AA%E9%87%8C\"><span class=\"toc-text\">1.3、Nacos 在哪里</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4%E3%80%81%E5%90%84%E7%A7%8D%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%AF%94%E8%BE%83\"><span class=\"toc-text\">1.4、各种注册中心比较</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-5%E3%80%81%E5%AE%89%E8%A3%85%E5%B9%B6%E8%BF%90%E8%A1%8C-Nacos\"><span class=\"toc-text\">1.5、安装并运行 Nacos</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#03%E3%80%81Nacos-%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83\"><span class=\"toc-text\">03、Nacos 作为服务注册中心</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1%E3%80%81%E5%9F%BA%E4%BA%8ENacos%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85\"><span class=\"toc-text\">1.1、基于Nacos的服务提供者</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2%E3%80%81%E6%BC%94%E7%A4%BAnacos%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E5%87%86%E5%A4%87\"><span class=\"toc-text\">1.2、演示nacos的负载均衡的准备</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3%E3%80%81%E6%8F%90%E4%BE%9BNacos%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85\"><span class=\"toc-text\">1.3、提供Nacos的服务消费者</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4%E3%80%81%E6%B3%A8%E6%84%8F\"><span class=\"toc-text\">1.4、注意</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#04%E3%80%81Nacos-%E4%BD%9C%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">04、Nacos 作为配置中心 - 基础配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#05%E3%80%81Nacos-%E4%BD%9C%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83-%E5%88%86%E7%B1%BB%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">05、Nacos 作为配置中心 - 分类配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1%E3%80%81%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%A4%9A%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">1.1、多环境多项目管理如何管理</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2%E3%80%81Nacos%E7%9A%84%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2\"><span class=\"toc-text\">1.2、Nacos的图形化管理界面</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3%E3%80%81Namespace-Group-Data-ID\"><span class=\"toc-text\">1.3、Namespace+Group+Data ID</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4%E3%80%81Data-ID-%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">1.4、Data ID 方案</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-5%E3%80%81Group-%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">1.5、Group 方案</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-6%E3%80%81Namespace-%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">1.6、Namespace 方案</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#06%E3%80%81Nacos%E9%9B%86%E7%BE%A4%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89\"><span class=\"toc-text\">06、Nacos集群和持久化配置（重要）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1%E3%80%81%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E5%9B%BE\"><span class=\"toc-text\">1.1、集群部署架构图</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-2%E3%80%81%E7%9C%9F%E5%AE%9E%E6%83%85%E5%86%B5\"><span class=\"toc-text\">1.2、真实情况</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-3%E3%80%81Nacos-%E6%94%AF%E6%8C%81%E4%B8%89%E7%A7%8D%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">1.3、Nacos 支持三种部署模式</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-4%E3%80%81%E5%8D%95%E6%9C%BA%E6%A8%A1%E5%BC%8F%E6%94%AF%E6%8C%81mysql\"><span class=\"toc-text\">1.4、单机模式支持mysql</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-5%E3%80%81Nacos%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE%E8%A7%A3%E9%87%8A\"><span class=\"toc-text\">1.5、Nacos持久化配置解释</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-6%E3%80%81Linux%E7%89%88Nacos-MySQL%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">1.6、Linux版Nacos+MySQL配置</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-7%E3%80%81%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89\"><span class=\"toc-text\">1.7、集群配置步骤（重点）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A0-%E5%AE%89%E8%A3%85-nacos\"><span class=\"toc-text\">① 安装 nacos</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A1-vim-application-properties\"><span class=\"toc-text\">② vim application.properties</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A2-%E5%A4%8D%E5%88%B63%E5%8F%B0nacos\"><span class=\"toc-text\">③ 复制3台nacos</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A3-%E7%BC%96%E8%BE%91%E5%90%AF%E5%8A%A8%E7%AB%AF\"><span class=\"toc-text\">④ 编辑启动端</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A4-%E5%90%AF%E5%8A%A8-nacos\"><span class=\"toc-text\">⑤ 启动 nacos</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A5-%E4%BF%AE%E6%94%B9nginx-conf\"><span class=\"toc-text\">⑥ 修改nginx.conf</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A6-%E5%90%AF%E5%8A%A8-nginx\"><span class=\"toc-text\">⑦ 启动 nginx</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A7-%E6%B5%8B%E8%AF%95%E9%80%9A%E8%BF%87nginx%E8%AE%BF%E9%97%AEnacos\"><span class=\"toc-text\">⑧ 测试通过nginx访问nacos</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A8-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">⑨ 新建一个配置测试</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#%E2%91%A9-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E6%B3%A8%E5%86%8C%E8%BF%9Bnacos%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">⑩ 微服务启动注册进nacos集群</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-8%E3%80%81%E9%AB%98%E5%8F%AF%E7%94%A8%E5%B0%8F%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">1.8、高可用小总结</span></a></li></ol></li></ol>","author":{"name":"大黄","slug":"blog-author","avatar":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-hh.JPG","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"https://github.com/hrenxiang","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/15236325327","zhihu":"https://www.zhihu.com/people/hrenxiang","csdn":"https://blog.csdn.net/hrenxiang","juejin":"https://juejin.cn/user/985642616227406","customs":{}}},"mapped":true,"prev_post":{"title":"Docker","uid":"a48e6dda0c21e40880cba7e763278b04","slug":"74-Docker","date":"2021-09-13T15:49:32.000Z","updated":"2021-09-15T10:46:04.049Z","comments":true,"path":"api/articles/74-Docker.json","cover":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-blog2.jpg","text":"简介 本文将整体介绍一下如何使用安装docker、获取docker资源、使用docker获得MySQL、redis等中间件服务并快速搭建，以及管理和使用这些中间件服务，docker容器和宿主机如何交互、如何构建我们自己的服务镜像等等。 本文内容有 我们为啥要用docker？ 管理...","link":"","photos":[],"count_time":{"symbolsCount":"26k","symbolsTime":"24 mins."},"categories":[{"name":"Docker","slug":"Docker","count":1,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":1,"path":"api/tags/Docker.json"}],"author":{"name":"大黄","slug":"blog-author","avatar":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-hh.JPG","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"https://github.com/hrenxiang","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/15236325327","zhihu":"https://www.zhihu.com/people/hrenxiang","csdn":"https://blog.csdn.net/hrenxiang","juejin":"https://juejin.cn/user/985642616227406","customs":{}}}},"next_post":{"title":"SpringCloud Slueth","uid":"2254a0dbf3036d34e7e7cb5837d981ff","slug":"71-SpringCloud-Slueth","date":"2021-09-13T15:47:32.000Z","updated":"2021-09-15T10:46:21.111Z","comments":true,"path":"api/articles/71-SpringCloud-Slueth.json","cover":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-blog5.jpg","text":"1、概述随着业务发展，系统拆分导致系统调用链路愈发复杂一个前端请求可能最终需要调用很多次后端服务才能完成，当整个请求变慢或不可用时，我们是无法得知该请求是由某个或某些后端服务引起的，这时就需要解决如何快读定位服务故障点，以对症下药。于是就有了分布式系统调用跟踪的诞生。 现今业界分...","link":"","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[{"name":"SpringCloud","slug":"SpringCloud","count":4,"path":"api/categories/SpringCloud.json"}],"tags":[{"name":"SpringCloud","slug":"SpringCloud","count":4,"path":"api/tags/SpringCloud.json"}],"author":{"name":"大黄","slug":"blog-author","avatar":"https://gitee.com/hrenxiang/picture/raw/master/uPic/2021:09:14-hh.JPG","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"https://github.com/hrenxiang","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/15236325327","zhihu":"https://www.zhihu.com/people/hrenxiang","csdn":"https://blog.csdn.net/hrenxiang","juejin":"https://juejin.cn/user/985642616227406","customs":{}}}}}